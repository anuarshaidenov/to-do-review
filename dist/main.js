(()=>{"use strict";const t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.description=e,this.completed=!1,this.index=n};function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,a,o=[],c=!0,r=!1;try{for(n=n.call(t);!(c=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);c=!0);}catch(t){r=!0,a=t}finally{try{c||null==n.return||n.return()}finally{if(r)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){c(t,e),e.add(t)}function o(t,e,n){c(t,e),e.set(t,n)}function c(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function l(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,u(t,e,"get"))}function s(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,u(t,e,"set"),n),n}function u(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var d=document.getElementById("to-do-list"),h=new WeakMap,f=new WeakMap,v=new WeakSet,m=new WeakSet,p=new WeakSet,y=new WeakSet,b=new WeakSet,k=new WeakSet,w=new WeakSet,g=new WeakSet,E=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),a(this,g),a(this,w),a(this,k),a(this,b),a(this,y),a(this,p),a(this,m),a(this,v),o(this,h,{writable:!0,value:JSON.parse(localStorage.getItem("tasks"))||[]}),o(this,f,{writable:!0,value:void 0}),s(this,f,t)}var c,u,d;return c=n,d=[{key:"getActionButtons",value:function(t){return[document.getElementById(t),document.querySelector(".btn-".concat(t))]}},{key:"unhideDeleteBtn",value:function(t){var i=e(n.getActionButtons(t.dataset.index),2),a=i[0];i[1].classList.add("hidden"),a.classList.remove("hidden")}},{key:"hideDeleteButton",value:function(t){var i=e(n.getActionButtons(t.dataset.index),2),a=i[0];i[1].classList.remove("hidden"),a.classList.add("hidden")}},{key:"generateMarkup",value:function(t){return'\n    <li class="main-list__item '.concat(t.completed?"main-list__item--checked":"",'">\n      <label class="main-list__label">\n        <input type="checkbox" data-index="').concat(t.index,'" ').concat(t.completed?"checked":""," class='main-list__checkbox' name=\"to-do-").concat(t.index,'"/>\n        <input type="text" class="main-list__description" data-index="').concat(t.index,'" value="').concat(t.description,'">\n      </label>\n      <button class="btn btn-action btn-').concat(t.index,'" type="button">\n        <ion-icon name="ellipsis-vertical-outline"></ion-icon>\n      </button>\n      <button class="btn btn-action btn-delete hidden" data-index="').concat(t.index,'" id="').concat(t.index,'" type="button">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </li>\n        ')}}],(u=[{key:"addTask",value:function(e){var n=new t(e,l(this,h).length+1);l(this,h).push(n),r(this,p,T).call(this)}},{key:"deleteTask",value:function(t){s(this,h,l(this,h).filter((function(e){return e!==t}))),r(this,k,A).call(this),r(this,p,T).call(this)}},{key:"clearCompletedTasks",value:function(){s(this,h,l(this,h).filter((function(t){return!t.completed}))),r(this,k,A).call(this),r(this,p,T).call(this)}},{key:"init",value:function(){r(this,g,I).call(this)}}])&&i(c.prototype,u),d&&i(c,d),n}();function x(){localStorage.setItem("tasks",JSON.stringify(l(this,h)))}function S(t){var e=t.dataset.index;return l(this,h).find((function(t){return t.index===+e}))}function T(){r(this,v,x).call(this),r(this,g,I).call(this)}function L(t){var e=r(this,m,S).call(this,t);t.checked?e.completed=!0:e.completed=!1,r(this,p,T).call(this)}function _(t){r(this,m,S).call(this,t).description=t.value,r(this,p,T).call(this)}function A(){for(var t=0;t<l(this,h).length;t+=1)l(this,h)[t].index=t+1}function B(){var t=this;document.querySelectorAll(".btn-delete").forEach((function(e){e.addEventListener("click",(function(){var n=r(t,m,S).call(t,e);t.deleteTask(n)}))})),document.querySelectorAll(".main-list__description").forEach((function(e){e.addEventListener("change",(function(){r(t,b,_).call(t,e)})),e.addEventListener("focusin",(function(){E.unhideDeleteBtn(e)})),e.addEventListener("focusout",(function(t){var n;null!==(n=t.relatedTarget)&&void 0!==n&&n.classList.contains("btn-delete")||E.hideDeleteButton(e)}))})),document.querySelectorAll(".main-list__checkbox").forEach((function(e){e.addEventListener("change",(function(){r(t,y,L).call(t,e)}))}))}function I(){var t=this;l(this,f).innerHTML="",l(this,h).sort((function(t,e){return t.index-e.index})),l(this,h).forEach((function(e){var n=E.generateMarkup(e);l(t,f).insertAdjacentHTML("beforeend",n)})),r(this,w,B).call(this)}const W=new E(d);var M=document.getElementById("add-input"),j=document.getElementById("add-form"),C=document.getElementById("btn-clear");j.addEventListener("submit",(function(t){t.preventDefault(),W.addTask(M.value),M.value=""})),C.addEventListener("click",(function(){W.clearCompletedTasks()})),window.addEventListener("load",(function(){W.init()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2pzL3RvRG8uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy9saXN0Vmlldy5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2pzL2NydWQuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUb0RvIHtcbiAgY29uc3RydWN0b3IodGFzaywgaW5kZXgpIHtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGFzaztcbiAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb0RvOyIsIi8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqL1xuaW1wb3J0IFRvRG8gZnJvbSAnLi90b0RvLmpzJztcblxuY29uc3QgdG9Eb0xpc3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0by1kby1saXN0Jyk7XG5cbmNsYXNzIFRvRG9MaXN0IHtcbiAgLy8gSW5pdGlhbCB2YWx1ZSBmb3IgdGhlIGxpc3Q6IGdldCB0aGUgZGF0YSBmcm9tIGxvY2FsIHN0b3JhZ2UsIGVtcHR5IGxpc3Qgb3RoZXJ3aXNlLlxuICAjdGFza3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpKSB8fCBbXTtcblxuICAjbGlzdEVsO1xuXG4gIGNvbnN0cnVjdG9yKGxpc3RFbCkge1xuICAgIC8vIEluaXRpYWxpemUgdGhlIGxpc3QgY29udGFpbmVyLlxuICAgIHRoaXMuI2xpc3RFbCA9IGxpc3RFbDtcbiAgfVxuXG4gIC8vIFN0b3JlIHRoZSBkYXRhIGluIGxvY2FsIHN0b3JhZ2UuXG4gICNzdG9yZURhdGEoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4jdGFza3MpKTtcbiAgfVxuXG4gIC8vIEdldCBhbiBpdGVtIGZyb20gdGhlIGxpc3Qgd2l0aCB0aGUgaW5kZXggcHJvdmlkZWQuXG4gICNnZXRJdGVtVG9DaGFuZ2UodGFzaykge1xuICAgIGNvbnN0IHsgaW5kZXggfSA9IHRhc2suZGF0YXNldDtcbiAgICByZXR1cm4gdGhpcy4jdGFza3MuZmluZCgoaXRlbSkgPT4gaXRlbS5pbmRleCA9PT0gK2luZGV4KTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3Rpb25CdXR0b25zKGluZGV4KSB7XG4gICAgY29uc3QgYnRuRGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5kZXgpO1xuICAgIGNvbnN0IGJ0bk9wdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5idG4tJHtpbmRleH1gKTtcbiAgICByZXR1cm4gW2J0bkRlbCwgYnRuT3B0aW9uXTtcbiAgfVxuXG4gIC8vIFNob3cgdGhlIGRlbGV0ZSBidXR0b25cbiAgc3RhdGljIHVuaGlkZURlbGV0ZUJ0bihpdGVtKSB7XG4gICAgY29uc3QgW2J0bkRlbCwgYnRuT3B0aW9uXSA9IFRvRG9MaXN0LmdldEFjdGlvbkJ1dHRvbnMoaXRlbS5kYXRhc2V0LmluZGV4KTtcbiAgICBidG5PcHRpb24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgYnRuRGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICB9XG5cbiAgLy8gSGlkZSB0aGUgZGVsZXRlIGJ1dHRvblxuICBzdGF0aWMgaGlkZURlbGV0ZUJ1dHRvbihpdGVtKSB7XG4gICAgY29uc3QgW2J0bkRlbCwgYnRuT3B0aW9uXSA9IFRvRG9MaXN0LmdldEFjdGlvbkJ1dHRvbnMoaXRlbS5kYXRhc2V0LmluZGV4KTtcbiAgICBidG5PcHRpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgYnRuRGVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICB9XG5cbiAgLy8gU3RvcmUgdGhlIGRhdGEgaW4gdGhlIGxvY2FsIHN0b3JhZ2UgYW5kIGRpc3BsYXkgdGhlIG5ldyBsaXN0IGl0ZW1zLlxuICAjc3RvcmVBbmREaXNwbGF5RGF0YSgpIHtcbiAgICB0aGlzLiNzdG9yZURhdGEoKTtcbiAgICB0aGlzLiNkaXNwbGF5TGlzdCgpO1xuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSB0YXNrIHN0YXR1cyBhY2NvcmRpbmcgdG8gdGhlIGNoZWNrYm94IGNoZWNrZWQgdmFsdWUuXG4gICN1cGRhdGVUYXNrU3RhdHVzKHRhc2spIHtcbiAgICBjb25zdCBpdGVtVG9DaGFuZ2UgPSB0aGlzLiNnZXRJdGVtVG9DaGFuZ2UodGFzayk7XG4gICAgaWYgKHRhc2suY2hlY2tlZCkge1xuICAgICAgaXRlbVRvQ2hhbmdlLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZW1Ub0NoYW5nZS5jb21wbGV0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy4jc3RvcmVBbmREaXNwbGF5RGF0YSgpO1xuICB9XG5cbiAgLy8gVXBkYXRlIHRhc2sgZGVzY3JpcHRpb246IGhhbmRsZXIgZm9yIHRoZSBkZXNjcmlwdGlvbiBpbnB1dCBjaGFuZ2UuXG4gICN1cGRhdGVUYXNrRGVzY3JpcHRpb24odGFzaykge1xuICAgIGNvbnN0IGl0ZW1Ub0NoYW5nZSA9IHRoaXMuI2dldEl0ZW1Ub0NoYW5nZSh0YXNrKTtcbiAgICBpdGVtVG9DaGFuZ2UuZGVzY3JpcHRpb24gPSB0YXNrLnZhbHVlO1xuICAgIHRoaXMuI3N0b3JlQW5kRGlzcGxheURhdGEoKTtcbiAgfVxuXG4gIC8vIEFkZCBhIG5ldyB0YXNrLiBQdWJsaWMgbWV0aG9kOiBjYWxsZWQgd2hlbiB1c2VyIHN1Ym1pdHMgbmV3IGFkZGVkIHRhc2suXG4gIGFkZFRhc2sodGFzaykge1xuICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgVG9Ebyh0YXNrLCB0aGlzLiN0YXNrcy5sZW5ndGggKyAxKTtcbiAgICB0aGlzLiN0YXNrcy5wdXNoKG5ld1Rhc2spO1xuICAgIHRoaXMuI3N0b3JlQW5kRGlzcGxheURhdGEoKTtcbiAgfVxuXG4gIC8vIEFycmFuZ2UgdGhlIHRhc2sgaW5kZXhlcyBpbiBhY3NlbmRpbmcgb3JkZXIgb25lIGJ5IG9uZS5cbiAgI29yZGVyVGFza3MoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLiN0YXNrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgdGhpcy4jdGFza3NbaV0uaW5kZXggPSBpICsgMTtcbiAgICB9XG4gIH1cblxuICAvLyBSZW1vdmUgdGFzayBmcm9tIHRoZSBsaXN0LCBzdG9yZSBhbmQgZGlzcGxheSB0aGUgZGF0YS5cbiAgZGVsZXRlVGFzayhpdGVtVG9EZWxldGUpIHtcbiAgICB0aGlzLiN0YXNrcyA9IHRoaXMuI3Rhc2tzLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAhPT0gaXRlbVRvRGVsZXRlKTtcbiAgICB0aGlzLiNvcmRlclRhc2tzKCk7XG4gICAgdGhpcy4jc3RvcmVBbmREaXNwbGF5RGF0YSgpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGNvbXBsZXRlZCB0YXNrcyBmcm9tIHRoZSBsaXN0LCBhcnJhbmdlIHRoZSBpbmRleGVzLCBzdG9yZSBhbmQgZGlzcGxheSB0aGUgZGF0YS5cbiAgY2xlYXJDb21wbGV0ZWRUYXNrcygpIHtcbiAgICB0aGlzLiN0YXNrcyA9IHRoaXMuI3Rhc2tzLmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0uY29tcGxldGVkKTtcbiAgICB0aGlzLiNvcmRlclRhc2tzKCk7XG4gICAgdGhpcy4jc3RvcmVBbmREaXNwbGF5RGF0YSgpO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGEgbWFya3VwIGZvciBhIHRhc2suXG4gIHN0YXRpYyBnZW5lcmF0ZU1hcmt1cCh0YXNrKSB7XG4gICAgcmV0dXJuIGBcbiAgICA8bGkgY2xhc3M9XCJtYWluLWxpc3RfX2l0ZW0gJHtcbiAgICAgIHRhc2suY29tcGxldGVkID8gJ21haW4tbGlzdF9faXRlbS0tY2hlY2tlZCcgOiAnJ1xuICAgIH1cIj5cbiAgICAgIDxsYWJlbCBjbGFzcz1cIm1haW4tbGlzdF9fbGFiZWxcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGRhdGEtaW5kZXg9XCIke3Rhc2suaW5kZXh9XCIgJHtcbiAgICAgIHRhc2suY29tcGxldGVkID8gJ2NoZWNrZWQnIDogJydcbiAgICB9IGNsYXNzPSdtYWluLWxpc3RfX2NoZWNrYm94JyBuYW1lPVwidG8tZG8tJHt0YXNrLmluZGV4fVwiLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJtYWluLWxpc3RfX2Rlc2NyaXB0aW9uXCIgZGF0YS1pbmRleD1cIiR7XG4gICAgICAgICAgdGFzay5pbmRleFxuICAgICAgICB9XCIgdmFsdWU9XCIke3Rhc2suZGVzY3JpcHRpb259XCI+XG4gICAgICA8L2xhYmVsPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tYWN0aW9uIGJ0bi0ke3Rhc2suaW5kZXh9XCIgdHlwZT1cImJ1dHRvblwiPlxuICAgICAgICA8aW9uLWljb24gbmFtZT1cImVsbGlwc2lzLXZlcnRpY2FsLW91dGxpbmVcIj48L2lvbi1pY29uPlxuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1hY3Rpb24gYnRuLWRlbGV0ZSBoaWRkZW5cIiBkYXRhLWluZGV4PVwiJHtcbiAgICAgICAgdGFzay5pbmRleFxuICAgICAgfVwiIGlkPVwiJHt0YXNrLmluZGV4fVwiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgPGlvbi1pY29uIG5hbWU9XCJ0cmFzaC1vdXRsaW5lXCI+PC9pb24taWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvbGk+XG4gICAgICAgIGA7XG4gIH1cblxuICAjYXR0YWNoRXZlbnRzKCkge1xuICAgIC8vIFJlbW92ZSB0YXNrIG9uIHRoZSBkZWxldGUgYnV0dG9uIGNsaWNrIGV2ZW50LlxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tZGVsZXRlJykuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1Ub0RlbGV0ZSA9IHRoaXMuI2dldEl0ZW1Ub0NoYW5nZShidG4pO1xuICAgICAgICB0aGlzLmRlbGV0ZVRhc2soaXRlbVRvRGVsZXRlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gRWRpdCBhIHRhc2sgZGVzY3JpcHRpb24gb24gdGhlIGlucHV0IGNoYW5nZS5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1saXN0X19kZXNjcmlwdGlvbicpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLiN1cGRhdGVUYXNrRGVzY3JpcHRpb24oaXRlbSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdyB0aGUgZGVsZXRlIGJ1dHRvbiBvbiBpbnB1dCBmb2N1cy5cbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsICgpID0+IHtcbiAgICAgICAgVG9Eb0xpc3QudW5oaWRlRGVsZXRlQnRuKGl0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEhpZGUgdGhlIGRlbGV0ZSBidXR0b24gb24gaW5wdXQgZm9jdXNvdXQuXG4gICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgKGUpID0+IHtcbiAgICAgICAgLy8gSWYgdGhlIGRlbGV0ZSBidXR0b24gaXMgY2xpY2tlZCByZXR1cm4gZnJvbSB0aGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKGUucmVsYXRlZFRhcmdldD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tZGVsZXRlJykpIHJldHVybjtcbiAgICAgICAgVG9Eb0xpc3QuaGlkZURlbGV0ZUJ1dHRvbihpdGVtKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIHRhc2sgc3RhdHVzIG9uIHRoZSBjaGVja2JveCBjaGVjayBldmVudC5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1saXN0X19jaGVja2JveCcpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLiN1cGRhdGVUYXNrU3RhdHVzKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBEaXNwbGF5IHRoZSBpdGVtcyBpbiB0aGUgRE9NLlxuICAjZGlzcGxheUxpc3QoKSB7XG4gICAgLy8gQ2xlYXIgdGhlIGxpc3QgYmVmb3JlIGRpc3BsYXlpbmcgdGhlIGl0ZW1zXG4gICAgdGhpcy4jbGlzdEVsLmlubmVySFRNTCA9ICcnO1xuICAgIC8vIFNvcnQgdGhlIGxpc3QgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgdGhpcy4jdGFza3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuICAgIC8vIERpc3BsYXkgdGhlIGl0ZW1zIGluIHRoZSBET01cbiAgICB0aGlzLiN0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBjb25zdCBtYXJrdXAgPSBUb0RvTGlzdC5nZW5lcmF0ZU1hcmt1cCh0YXNrKTtcbiAgICAgIHRoaXMuI2xpc3RFbC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIG1hcmt1cCk7XG4gICAgfSk7XG5cbiAgICAvLyBBdHRhY2ggZXZlbnQgaGFuZGxlcnMgdG8gdGhlIGR5bmFtaWNhbGx5IGNyZWF0ZWQgZWxlbWVudHMuXG4gICAgdGhpcy4jYXR0YWNoRXZlbnRzKCk7XG4gIH1cblxuICAvLyBJbml0aWFsaXplIHRoZSBsaXN0LlxuICBpbml0KCkge1xuICAgIHRoaXMuI2Rpc3BsYXlMaXN0KCk7XG4gIH1cbn1cblxuY29uc3QgdG9Eb0xpc3QgPSBuZXcgVG9Eb0xpc3QodG9Eb0xpc3RFbCk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvRG9MaXN0O1xuIiwiaW1wb3J0IHRvRG9MaXN0IGZyb20gJy4vbGlzdFZpZXcuanMnO1xuXG5jb25zdCBhZGRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtaW5wdXQnKTtcblxuLy8gQWRkIGEgbmV3IHRhc2sgdG8gdGhlIGxpc3QgYW5kIGNsZWFyIHRoZSBpbnB1dCBmaWVsZC5cbmV4cG9ydCBjb25zdCBhZGRIYW5kbGVyID0gKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB0b0RvTGlzdC5hZGRUYXNrKGFkZElucHV0LnZhbHVlKTtcbiAgYWRkSW5wdXQudmFsdWUgPSAnJztcbn07XG5cbi8vIFJlbW92ZSBjb21wbGV0ZWQgdGFza3MgZnJvbSB0aGUgbGlzdC5cbmV4cG9ydCBjb25zdCBjbGVhckNvbXBsZXRlZEhhbmRsZXIgPSAoKSA9PiB7XG4gIHRvRG9MaXN0LmNsZWFyQ29tcGxldGVkVGFza3MoKTtcbn07XG4iLCJpbXBvcnQgdG9Eb0xpc3QgZnJvbSAnLi9saXN0Vmlldy5qcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9tYWluLmNzcyc7XG5pbXBvcnQgeyBhZGRIYW5kbGVyLCBjbGVhckNvbXBsZXRlZEhhbmRsZXIgfSBmcm9tICcuL2NydWQuanMnO1xuXG5jb25zdCBhZGRGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1mb3JtJyk7XG5jb25zdCBjbGVhckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tY2xlYXInKTtcblxuLy8gTGlzdGVuIHRvIGFkZCBldmVudDogQWRkIGEgbmV3IHRhc2sgaW50byB0aGUgdG8gZG8gbGlzdC5cbmFkZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYWRkSGFuZGxlcik7XG4vLyBMaXN0ZW4gdG8gY2xlYXIgYnV0dG9uIGNsaWNrIGV2ZW50OiBSZW1vdmUgY29tcGxldGVkIHRhc2sgZnJvbSB0aGUgdG8gZG8gbGlzdC5cbmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJDb21wbGV0ZWRIYW5kbGVyKTtcblxuLy8gSW5pdGlhbGl6ZSB0aGUgdG8gZG8gbGlzdC5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICB0b0RvTGlzdC5pbml0KCk7XG59KTtcbiJdLCJuYW1lcyI6WyJ0YXNrIiwiaW5kZXgiLCJ0aGlzIiwiZGVzY3JpcHRpb24iLCJjb21wbGV0ZWQiLCJ0b0RvTGlzdEVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIlRvRG9MaXN0IiwibGlzdEVsIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInF1ZXJ5U2VsZWN0b3IiLCJpdGVtIiwiZ2V0QWN0aW9uQnV0dG9ucyIsImRhdGFzZXQiLCJidG5EZWwiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJuZXdUYXNrIiwiVG9EbyIsImxlbmd0aCIsInB1c2giLCJpdGVtVG9EZWxldGUiLCJmaWx0ZXIiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZmluZCIsIml0ZW1Ub0NoYW5nZSIsImNoZWNrZWQiLCJ2YWx1ZSIsImkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVUYXNrIiwidW5oaWRlRGVsZXRlQnRuIiwiZSIsInJlbGF0ZWRUYXJnZXQiLCJjb250YWlucyIsImhpZGVEZWxldGVCdXR0b24iLCJpbm5lckhUTUwiLCJzb3J0IiwiYSIsImIiLCJtYXJrdXAiLCJnZW5lcmF0ZU1hcmt1cCIsImluc2VydEFkamFjZW50SFRNTCIsImFkZElucHV0IiwiYWRkRm9ybSIsImNsZWFyQnRuIiwicHJldmVudERlZmF1bHQiLCJ0b0RvTGlzdCIsIndpbmRvdyJdLCJzb3VyY2VSb290IjoiIn0=